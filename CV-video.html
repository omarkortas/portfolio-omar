<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Omar's CV Vidéo</title>
    <link rel="icon" type="image/png" href="omar.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/particlesjs/2.2.3/particles.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <style>
        :root {
            --bg-primary: #1a1a2e;
            --bg-secondary: #16213e;
            --text-primary: #ffffff;
            --text-secondary: #d1d5db;
            --card-bg: rgba(31, 41, 55, 0.5);
            --border-color: rgba(96, 165, 250, 0.5);
            --accent-blue: #60a5fa;
            --accent-purple: #a855f7;
        }
        
        [data-theme="light"] {
            --bg-primary: #f3f4f6;
            --bg-secondary: #e5e7eb;
            --text-primary: #1f2937;
            --text-secondary: #4b5563;
            --card-bg: rgba(255, 255, 255, 0.8);
            --border-color: rgba(59, 130, 246, 0.3);
            --accent-blue: #3b82f6;
            --accent-purple: #7c3aed;
        }

        body {
            background: linear-gradient(180deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
            position: relative;
            overflow-x: hidden;
            color: var(--text-primary);
            transition: background 0.3s ease, color 0.3s ease;
        }

        .animate-typing {
            width: 0;
            animation: typing 4s steps(30, end) forwards, blink 0.5s step-end infinite;
        }
        
        @keyframes typing {
            from { width: 0; }
            to { width: 100%; }
        }
        
        @keyframes blink {
            from, to { border-color: transparent; }
            50% { border-color: var(--accent-blue); }
        }
        
        #particles-background {
            opacity: 0.3;
            background: transparent;
        }

        .tech-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
            overflow: hidden;
        }

        .circuit-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0.15;
        }

        .circuit-path {
            stroke: var(--accent-blue);
            stroke-width: 2;
            fill: none;
            stroke-dasharray: 20, 10;
            animation: circuit-flow 12s linear infinite;
        }

        @keyframes circuit-flow {
            0% { stroke-dashoffset: 0; }
            100% { stroke-dashoffset: -30; }
        }
    </style>
</head>
<body class="font-sans antialiased overflow-x-hidden" data-theme="dark">
    <div class="tech-background">
        <div class="circuit-layer">
            <svg viewBox="0 0 1920 1080" preserveAspectRatio="xMidYMid slice">
                <path class="circuit-path" d="M100,200 H400 V500 H700 V300 H1000 V600 H1300 V400 H1600 V200 H1800" />
                <path class="circuit-path" d="M200,300 H500 V600 H800 V400 H1100 V700 H1400 V300 H1700" />
            </svg>
        </div>
    </div>
    <div id="particles-background" class="fixed top-0 left-0 w-full h-full z-0"></div>
    <div id="root" class="relative z-10"></div>
    <script src="https://cdn.jsdelivr.net/npm/react@18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/react-dom@18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@babel/standalone@7.22.9/babel.min.js"></script>
    <script type="text/babel">
        const { useEffect, useState, useRef } = React;

        // Error Boundary Component
        class ErrorBoundary extends React.Component {
            state = { hasError: false };
            static getDerivedStateFromError(error) {
                return { hasError: true };
            }
            render() {
                if (this.state.hasError) {
                    return <h1 className="text-center text-red-400">Une erreur s'est produite. Veuillez vérifier la console.</h1>;
                }
                return this.props.children;
            }
        }

        // Theme Context
        const ThemeContext = React.createContext();

        // Composant pour les animations de texte
        const AnimatedText = ({ children, delay = 0, className = "", once = true }) => {
            const ref = useRef(null);
            
            useEffect(() => {
                const element = ref.current;
                if (!element) return;
                gsap.fromTo(
                    element,
                    { opacity: 0, y: 20 },
                    {
                        opacity: 1, 
                        y: 0, 
                        duration: 0.8, 
                        delay: delay,
                        scrollTrigger: {
                            trigger: element,
                            start: "top 85%",
                            toggleActions: once ? "play none none none" : "restart none none none"
                        }
                    }
                );
            }, [delay, once]);
            
            return <div ref={ref} className={`opacity-0 ${className}`}>{children}</div>;
        };

        // Composant pour les animations d'apparition
        const FadeIn = ({ children, direction = "up", delay = 0, duration = 0.8, className = "", triggerPoint = "85%" }) => {
            const ref = useRef(null);
            
            useEffect(() => {
                const element = ref.current;
                if (!element) return;
                let fromVars = { opacity: 0 };
                
                if (direction === "up") fromVars.y = 40;
                if (direction === "down") fromVars.y = -40;
                if (direction === "left") fromVars.x = 40;
                if (direction === "right") fromVars.x = -40;
                
                gsap.fromTo(
                    element,
                    fromVars,
                    {
                        opacity: 1,
                        x: 0,
                        y: 0,
                        duration: duration,
                        delay: delay,
                        ease: "power3.out",
                        scrollTrigger: {
                            trigger: element,
                            start: `top ${triggerPoint}`,
                        }
                    }
                );
            }, [direction, delay, duration, triggerPoint]);
            
            return <div ref={ref} className={`opacity-0 ${className}`}>{children}</div>;
        };

        // Barre de navigation
        const Navbar = () => {
            const [isOpen, setIsOpen] = useState(false);
            const [scrolled, setScrolled] = useState(false);
            const navbarRef = useRef(null);
            const { theme, toggleTheme } = React.useContext(ThemeContext);
            
            const toggleMenu = () => setIsOpen(!isOpen);
            
            useEffect(() => {
                const handleScroll = () => {
                    if (window.scrollY > 50) {
                        setScrolled(true);
                    } else {
                        setScrolled(false);
                    }
                };
                
                window.addEventListener('scroll', handleScroll);
                return () => {
                    window.removeEventListener('scroll', handleScroll);
                };
            }, []);
            
            useEffect(() => {
                const element = navbarRef.current;
                if (!element) return;
                gsap.fromTo(
                    element,
                    { y: -100 },
                    { y: 0, duration: 0.8, delay: 0.5, ease: "power3.out" }
                );
            }, []);
            
            const navItems = ['Accueil', 'A propos', 'Compétences', 'Projets', 'Expériences', 'Statistiques', 'Contact'];
            
            return (
                <nav ref={navbarRef} className={`fixed top-0 left-0 w-full z-50 transition-all duration-300 ${scrolled ? 'bg-[var(--bg-primary)] shadow-lg backdrop-blur-lg bg-opacity-80' : 'bg-transparent'}`}>
                    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                        <div className="flex justify-between h-16 items-center">
                            <a href="index.html" className="group flex items-center">
                                <span className="text-2xl font-extrabold text-[var(--text-primary)] tracking-tight group-hover:text-[var(--accent-blue)] transition-colors duration-300">
                                    <span className="text-[var(--accent-blue)]">&lt;</span>Omar el farouk<span className="text-[var(--accent-blue)]">/&gt;</span>
                                </span>
                            </a>
                            <div className="hidden md:flex items-center space-x-6">
                                {navItems.map((item, index) => (
                                    <a
                                        key={item}
                                        href={`index.html#${item.toLowerCase().replace(' ', '-')}`}
                                        className="text-[var(--text-secondary)] hover:text-[var(--accent-blue)] relative overflow-hidden group text-sm font-medium"
                                    >
                                        {item}
                                        <span className="absolute bottom-0 left-0 w-0 h-0.5 bg-[var(--accent-blue)] group-hover:w-full transition-all duration-300"></span>
                                    </a>
                                ))}
                                <button
                                    onClick={toggleTheme}
                                    className="w-10 h-10 rounded-full bg-[var(--card-bg)] border border-[var(--border-color)] flex items-center justify-center text-[var(--text-primary)] hover:text-[var(--accent-blue)] transition-colors"
                                    title={theme === 'dark' ? 'Passer au mode clair' : 'Passer au mode sombre'}
                                >
                                    <i className={theme === 'dark' ? 'fas fa-sun' : 'fas fa-moon'}></i>
                                </button>
                            </div>
                            <div className="flex items-center md:hidden space-x-4">
                                <button onClick={toggleMenu} className="text-[var(--text-primary)] focus:outline-none">
                                    <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path
                                            strokeLinecap="round"
                                            strokeLinejoin="round"
                                            strokeWidth="2"
                                            d={isOpen ? 'M6 18L18 6M6 6l12 12' : 'M4 6h16M4 12h16M4 18h16'}
                                        />
                                    </svg>
                                </button>
                                <button
                                    onClick={toggleTheme}
                                    className="w-10 h-10 rounded-full bg-[var(--card-bg)] border border-[var(--border-color)] flex items-center justify-center text-[var(--text-primary)] hover:text-[var(--accent-blue)] transition-colors"
                                    title={theme === 'dark' ? 'Passer au mode clair' : 'Passer au mode sombre'}
                                >
                                    <i className={theme === 'dark' ? 'fas fa-sun' : 'fas fa-moon'}></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    {isOpen && (
                        <div className="md:hidden bg-[var(--bg-primary)] bg-opacity-95 backdrop-blur-lg">
                            {navItems.map((item) => (
                                <a
                                    key={item}
                                    href={`index.html#${item.toLowerCase().replace(' ', '-')}`}
                                    className="block px-4 py-3 text-[var(--text-secondary)] hover:text-[var(--accent-blue)] hover:bg-[var(--bg-secondary)] text-center border-b border-[var(--border-color)] transition-colors duration-200"
                                    onClick={toggleMenu}
                                >
                                    {item}
                                </a>
                            ))}
                        </div>
                    )}
                </nav>
            );
        };

        // Section CV Vidéo
        const CVVideo = () => {
            const sectionRef = useRef(null);

            useEffect(() => {
                const tl = gsap.timeline({ defaults: { ease: "power4.out" } });
                tl.fromTo(".cv-heading", { opacity: 0, y: 50 }, { opacity: 1, y: 0, duration: 1 }, 0.3)
                  .fromTo(".cv-text", { opacity: 0, y: 30 }, { opacity: 1, y: 0, duration: 1 }, 0.6)
                  .fromTo(".cv-buttons", { opacity: 0, y: 30 }, { opacity: 1, y: 0, duration: 1 }, 0.8)
                  .fromTo(".cv-video", { opacity: 0, scale: 0.9 }, { opacity: 1, scale: 1, duration: 1.2 }, 0.5);
            }, []);

            return (
                <section id="cv-video" ref={sectionRef} className="min-h-screen flex items-center pt-16 relative overflow-hidden">
                    <div className="absolute inset-0 z-0">
                        <div className="absolute inset-0 bg-gradient-to-br from-[var(--bg-primary)]/70 via-[var(--accent-blue)]/50 to-[var(--bg-primary)]/70"></div>
                    </div>
                    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
                        <div className="bg-[var(--card-bg)] backdrop-blur-lg p-8 rounded-xl border border-[var(--border-color)] text-center max-w-4xl mx-auto">
                            <div className="cv-heading">
                                <h1 className="text-3xl sm:text-4xl font-extrabold text-[var(--text-primary)] mb-6">
                                    <span className="text-[var(--accent-blue)]">&lt;</span> CV Vidéo <span className="text-[var(--accent-blue)]">/&gt;</span>
                                </h1>
                            </div>
                            <FadeIn direction="up" className="cv-text">
                                <p className="text-lg text-[var(--text-secondary)] mb-6">
                                    Visionnez ma présentation vidéo ou téléchargez-la pour en savoir plus sur mon parcours.
                                </p>
                            </FadeIn>
                            <FadeIn direction="up" delay={0.2} className="cv-buttons">
                                <div className="flex flex-col sm:flex-row justify-center gap-4 mb-8">
                                    <a
                                        href="https://drive.google.com/uc?export=download&id=1UT6dGF4ORhCnzvyReknFiC0dbJKTjmc6"
                                        download
                                        className="bg-[var(--accent-blue)] text-[var(--text-primary)] px-6 py-3 rounded-full hover:bg-[var(--accent-blue)]/90 transition duration-300 text-sm font-medium transform hover:scale-105 flex items-center gap-2"
                                    >
                                        <i className="fas fa-download"></i>
                                        Télécharger le CV Vidéo
                                    </a>
                                    <a
                                        href="index.html"
                                        className="bg-transparent border-2 border-[var(--accent-blue)] text-[var(--accent-blue)] px-6 py-3 rounded-full hover:bg-[var(--accent-blue)] hover:text-[var(--text-primary)] transition duration-300 text-sm font-medium transform hover:scale-105 flex items-center gap-2"
                                    >
                                        <i className="fas fa-arrow-left"></i>
                                        Retour
                                    </a>
                                </div>
                            </FadeIn>
                            <FadeIn direction="up" delay={0.4} className="cv-video">
                                <div className="bg-[var(--bg-primary)] p-1 rounded-lg">
                                    <iframe
                                        src="https://drive.google.com/file/d/1UT6dGF4ORhCnzvyReknFiC0dbJKTjmc6/preview/kelmakhatya"
                                        width="100%"
                                        height="480"
                                        allowFullScreen
                                        className="rounded-lg border border-[var(--border-color)]"
                                        onError={() => console.error("Erreur de chargement de l'iframe vidéo")}
                                    ></iframe>
                                </div>
                            </FadeIn>
                        </div>
                    </div>
                </section>
            );
        };

        // Footer
        const Footer = () => {
            return (
                <footer className="bg-[var(--card-bg)] py-8">
                    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                        <AnimatedText delay={0.2}>
                            <p className="text-[var(--text-secondary)] mb-4">© 2025 Omar El Farouk. Tous droits réservés.</p>
                        </AnimatedText>
                        <div className="flex justify-center gap-6">
                            <a href="https://www.linkedin.com/in/omar-el-farouk-kortas-8b4613294/" className="text-[var(--text-secondary)] hover:text-[var(--accent-blue)] transition transform hover:scale-110">
                                <i className="fab fa-linkedin text-xl"></i>
                            </a>
                            <a href="https://github.com/omarkortas" className="text-[var(--text-secondary)] hover:text-[var(--accent-blue)] transition transform hover:scale-110">
                                <i className="fab fa-github text-xl"></i>
                            </a>
                        </div>
                    </div>
                </footer>
            );
        };

        // Composant principal
        const App = () => {
            const [theme, setTheme] = useState('dark');

            useEffect(() => {
                try {
                    Particles.init({
                        selector: '#particles-background',
                        color: theme === 'dark' ? ['#60A5FA', '#A855F7', '#FFFFFF'] : ['#3B82F6', '#6B21A8', '#000000'],
                        connectParticles: true,
                        maxParticles: 100,
                        speed: 0.6,
                        sizeVariations: 4,
                        minDistance: 100,
                        responsive: [
                            {
                                breakpoint: 768,
                                options: { maxParticles: 60, minDistance: 80 }
                            },
                            {
                                breakpoint: 425,
                                options: { maxParticles: 40, minDistance: 60 }
                            }
                        ],
                        particleOpacity: 0.7
                    });
                } catch (error) {
                    console.error("Erreur lors de l'initialisation de Particles.js:", error);
                }

                const updateParticles = () => {
                    try {
                        Particles.refresh();
                    } catch (error) {
                        console.error("Erreur lors de la mise à jour des particules:", error);
                    }
                };

                window.addEventListener('themeChange', updateParticles);
                return () => window.removeEventListener('themeChange', updateParticles);
            }, [theme]);

            const toggleTheme = () => {
                const newTheme = theme === 'dark' ? 'light' : 'dark';
                setTheme(newTheme);
                document.body.setAttribute('data-theme', newTheme);
                window.dispatchEvent(new Event('themeChange'));
                window.dispatchEvent(new Event('resize'));
            };

            return (
                <ThemeContext.Provider value={{ theme, toggleTheme }}>
                    <ErrorBoundary>
                        <Navbar />
                        <CVVideo />
                        <Footer />
                    </ErrorBoundary>
                </ThemeContext.Provider>
            );
        };

        // Rendu de l'application
        ReactDOM.render(<App />, document.getElementById('root'));

        // Nettoyage des animations GSAP et ScrollTrigger
        window.addEventListener('beforeunload', () => {
            ScrollTrigger.getAll().forEach(trigger => trigger.kill());
            gsap.killTweensOf('*');
        });
    </script>
</body>
</html>
